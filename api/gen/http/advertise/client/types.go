// Code generated by goa v3.15.2, DO NOT EDIT.
//
// advertise HTTP client types
//
// Command:
// $ goa gen github.com/Frank0945/go-advertise/api/design -o api

package client

import (
	"unicode/utf8"

	advertise "github.com/Frank0945/go-advertise/api/gen/advertise"
	goa "goa.design/goa/v3/pkg"
)

// CreateAdRequestBody is the type of the "advertise" service "create_ad"
// endpoint HTTP request body.
type CreateAdRequestBody struct {
	// Title of AD
	Title string `form:"title" json:"title" xml:"title"`
	// Start time of AD
	StartAt string `form:"start_at" json:"start_at" xml:"start_at"`
	// End time of AD
	EndAt      string `form:"end_at" json:"end_at" xml:"end_at"`
	Conditions *struct {
		// Start age of target
		AgeStart *int `form:"age_start" json:"age_start" xml:"age_start"`
		// End age of target
		AgeEnd *int `form:"age_end" json:"age_end" xml:"age_end"`
		// Gender of target
		Gender *string `form:"gender" json:"gender" xml:"gender"`
		// Country of target
		Country *string `form:"country" json:"country" xml:"country"`
		// Platform of target
		Platform *string `form:"platform" json:"platform" xml:"platform"`
	} `form:"conditions,omitempty" json:"conditions,omitempty" xml:"conditions,omitempty"`
}

// CreateAdResponseBody is the type of the "advertise" service "create_ad"
// endpoint HTTP response body.
type CreateAdResponseBody struct {
	// ID of the AD
	ID *int `form:"id,omitempty" json:"id,omitempty" xml:"id,omitempty"`
}

// ListAdsResponseBody is the type of the "advertise" service "list_ads"
// endpoint HTTP response body.
type ListAdsResponseBody []*AdResponse

// AdResponse is used to define fields on response body types.
type AdResponse struct {
	// Title of AD
	Title *string `form:"title,omitempty" json:"title,omitempty" xml:"title,omitempty"`
	// End time of AD
	EndAt *string `form:"end_at,omitempty" json:"end_at,omitempty" xml:"end_at,omitempty"`
}

// NewCreateAdRequestBody builds the HTTP request body from the payload of the
// "create_ad" endpoint of the "advertise" service.
func NewCreateAdRequestBody(p *advertise.CreateAdPayload) *CreateAdRequestBody {
	body := &CreateAdRequestBody{
		Title:   p.Title,
		StartAt: p.StartAt,
		EndAt:   p.EndAt,
	}
	if p.Conditions != nil {
		body.Conditions = &struct {
			// Start age of target
			AgeStart *int `form:"age_start" json:"age_start" xml:"age_start"`
			// End age of target
			AgeEnd *int `form:"age_end" json:"age_end" xml:"age_end"`
			// Gender of target
			Gender *string `form:"gender" json:"gender" xml:"gender"`
			// Country of target
			Country *string `form:"country" json:"country" xml:"country"`
			// Platform of target
			Platform *string `form:"platform" json:"platform" xml:"platform"`
		}{
			AgeStart: p.Conditions.AgeStart,
			AgeEnd:   p.Conditions.AgeEnd,
			Gender:   p.Conditions.Gender,
			Country:  p.Conditions.Country,
			Platform: p.Conditions.Platform,
		}
	}
	return body
}

// NewCreateAdResultCreated builds a "advertise" service "create_ad" endpoint
// result from a HTTP "Created" response.
func NewCreateAdResultCreated(body *CreateAdResponseBody) *advertise.CreateAdResult {
	v := &advertise.CreateAdResult{
		ID: *body.ID,
	}

	return v
}

// NewListAdsAdOK builds a "advertise" service "list_ads" endpoint result from
// a HTTP "OK" response.
func NewListAdsAdOK(body []*AdResponse) []*advertise.Ad {
	v := make([]*advertise.Ad, len(body))
	for i, val := range body {
		v[i] = unmarshalAdResponseToAdvertiseAd(val)
	}

	return v
}

// ValidateCreateAdResponseBody runs the validations defined on
// create_ad_response_body
func ValidateCreateAdResponseBody(body *CreateAdResponseBody) (err error) {
	if body.ID == nil {
		err = goa.MergeErrors(err, goa.MissingFieldError("id", "body"))
	}
	return
}

// ValidateAdResponse runs the validations defined on AdResponse
func ValidateAdResponse(body *AdResponse) (err error) {
	if body.Title == nil {
		err = goa.MergeErrors(err, goa.MissingFieldError("title", "body"))
	}
	if body.EndAt == nil {
		err = goa.MergeErrors(err, goa.MissingFieldError("end_at", "body"))
	}
	if body.Title != nil {
		if utf8.RuneCountInString(*body.Title) < 1 {
			err = goa.MergeErrors(err, goa.InvalidLengthError("body.title", *body.Title, utf8.RuneCountInString(*body.Title), 1, true))
		}
	}
	if body.Title != nil {
		if utf8.RuneCountInString(*body.Title) > 100 {
			err = goa.MergeErrors(err, goa.InvalidLengthError("body.title", *body.Title, utf8.RuneCountInString(*body.Title), 100, false))
		}
	}
	if body.EndAt != nil {
		err = goa.MergeErrors(err, goa.ValidateFormat("body.end_at", *body.EndAt, goa.FormatDateTime))
	}
	return
}
